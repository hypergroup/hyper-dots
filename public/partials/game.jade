
section.game(data-hyper="game.height, game.width",
             data-height="{{height}}",
             data-width="{{width}}")

  .board(data-hyper="game.state")

    .panels(data-hyper="state.panels")
      .panel(data-ng-repeat="panel in panels",
             data-hyper="panel.row, panel.col, panel.owner.color",
             data-row="{{row || 0}}",
             data-col="{{col || 0}}",
             data-ng-style="{'background': color }")

    .edges(data-hyper="state.edges")
      .edge(data-ng-repeat="edge in edges",
            data-hyper="edge.row, edge.col, edge.type",
            data-row="{{row || 0}}",
            data-col="{{col || 0}}",
            data-type="{{type}}")

        .color(data-hyper="edge.owner.color",
               data-ng-style="{'background': color }")
        form(data-hyper-form="edge.occupy")
          .inner(data-ng-click="submit()")


.controls
  .players(data-hyper="game.state.scores")
    div(data-ng-repeat="score in scores")
      h1(data-hyper-bind="score.player.first-name")
      // TODO fix hyper-bind
      h2(data-ng-bind="score.score")
      div.color(data-hyper="score.player.color",
                data-ng-style="{'background': color }")
      div(data-hyper="game.state.turn",
          data-ng-switch="turn == score.player.href")
        div(data-ng-switch-when="true")
          h1 waiting on other player

.messages(data-hyper="game.chat")
  .message(data-ng-repeat="message in chat")
    p
      | author:
      span(data-hyper-bind="message.author.first-name")
      | content;
      span(data-hyper-bind="message.content")
      | date:
      span(data-hyper-bind="message.date")
  form(data-hyper-form="game.chat.message")
    div(data-ng-repeat="input in inputs")
      input(data-hyper-input="input")
    input(type="submit", value="submit")



.state(data-ng-hide="game.state")
  p Waiting for other players

form(data-hyper-form="game.join")
  button(data-ng-click="submit()") join
form(data-hyper-form="game.start")
  button(data-ng-click="submit()") start
form(data-hyper-form="game.leave")
  button(data-ng-click="submit()") leave
